{
  "services": {
    "spark-cluster": {
      "container_name": "spark-cluster",
      "hostname": "spark-cluster",
      "image": "spark:python3-java17",
      "env_file": "./env/spark-cluster.env",
      "ports": [
        "18080:18080",
        "6066:6066",
        "7077:7077",
        "8080:8080",
        "8081:8081"
      ],
      "volumes": [
        "./bin/launch-spark-cluster.sh:/opt/spark/bin/launch-spark-cluster.sh",
        "./spark-data/logs/:/opt/spark/work-dir/logs/:rw",
        "./spark-data/spark-events/:/opt/spark/work-dir/data/spark-events/:rw"
      ],
      "command": ["sh", "-c", "/opt/spark/bin/launch-spark-cluster.sh"],
      "healthcheck": {
        "test": ["CMD", "curl", "-f", "http://spark-cluster:8080"],
        "interval": "5s",
        "timeout": "3s",
        "retries": 3
      }
    },

    "spark-connect": {
      "container_name": "spark-connect",
      "hostname": "spark-connect",
      "image": "spark:python3-java17",
      "env_file": "./env/spark-connect.env",
      "ports": [
        "4040:4040",
        "15002:15002"
      ],
      "volumes": [
        "./bin/launch-spark-connect.sh:/opt/spark/bin/launch-spark-connect.sh",
        "./spark-data/logs/:/opt/spark/work-dir/logs/:rw",
        "./spark-data/data/:/opt/spark/work-dir/data/:rw"
      ],
      "command": ["sh", "-c", "/opt/spark/bin/launch-spark-connect.sh"],
      "depends_on": ["spark-cluster"],
      "healthcheck": {
        "test": ["CMD", "curl", "-f", "http://spark-connect:4040"],
        "interval": "5s",
        "timeout": "3s",
        "retries": 3
      }
    }
  }
}
